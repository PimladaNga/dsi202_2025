{% extends 'myapp/base.html' %}
{% load static %}

{% block title %}Chum-Chon Link - ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å{% endblock %}

{% block content %}

    {% if user.is_authenticated %}
        <div class="container mx-auto px-4 py-8">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-5 leading-loose">
                ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö, {{ user.username }} üëã
            </h2>
            <p class="text-lg text-gray-600">
                ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì! ‡∏•‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡∏°‡πà‡πÜ ‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ö‡πâ‡∏≤‡∏á
            </p>
            <div class="mt-6">
                <a href="{% url 'event_list' %}" class="bg-purple-600 hover:bg-purple-700 text-white font-semibold px-6 py-3 rounded-lg shadow-md hover:shadow-lg transition-all duration-150 text-base mr-4">
                    ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
                </a>
                <a href="{% url 'user_profile' %}" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold px-6 py-3 rounded-lg shadow-md hover:shadow-lg transition-all duration-150 text-base">
                    ‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                </a>
            </div>
            {# ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÑ‡∏î‡πâ #}
        </div>
    {% else %}
        {# --- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô Hero Section ‡πÉ‡∏´‡∏°‡πà (‡∏™‡πÑ‡∏ï‡∏•‡πå Meetup.com) --- #}
        <section class="bg-gradient-to-b from-white to-purple-100 pt-12 pb-16 md:pt-16 md:pb-20">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row items-center justify-between gap-10 md:gap-16">
                    <div class="md:w-3/5 lg:w-1/2 text-center md:text-left">
                        <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-5 leading-tight">
                            ‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ç‡∏≠‡∏á<span class="text-purple-600">‡∏ú‡∏π‡πâ‡∏Ñ‡∏ô</span>‚Äî<br class="hidden xs:block sm:hidden md:block">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡∏∂‡πà‡∏á<span class="text-purple-600">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡πÉ‡∏à</span><br class="hidden xs:block sm:hidden md:block">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô<span class="text-purple-600">‡∏°‡∏¥‡∏ï‡∏£‡∏†‡∏≤‡∏û</span>
                        </h1>
                        <p class="text-lg text-gray-700 mb-8 leading-relaxed max-w-xl">
                            ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£ ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏õ‡πà‡∏≤ ‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ ‡πÑ‡∏õ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡∏ó‡∏±‡∏Å‡∏©‡∏∞ Chum-Chon Link ‡∏Ñ‡∏∑‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏à‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡πÜ ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‚Äî‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏•‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏≤‡∏™‡∏ô‡∏∏‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô!
                        </p>
                        <a href="{% url 'signup' %}" class="inline-block bg-purple-600 hover:bg-purple-700 active:bg-purple-800 text-white font-semibold px-8 py-3 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105 text-lg">
                            ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° Chum-Chon Link
                        </a>
                    </div>

                    <div class="md:w-2/5 lg:w-1/2 mt-8 md:mt-0 flex justify-center md:justify-end">
                        <img src="{% static 'images/signup-banner.jpg' %}" alt="‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏Ñ‡∏ô" class="w-full max-w-sm sm:max-w-md md:max-w-lg h-auto rounded-lg shadow-md">
                    </div>
                </div>
            </div>
        </section>
        {# --- ‡∏à‡∏ö‡∏™‡πà‡∏ß‡∏ô Hero Section ‡πÉ‡∏´‡∏°‡πà --- #}
    {% endif %} {# <--- ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ endif ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ #}

    {# --- ‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô (‡∏ó‡∏±‡πâ‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô) --- #}
    <section class="py-12 md:py-16 bg-gray-50 border-t border-gray-200">
        <div class="container mx-auto px-4"> {# ‡πÄ‡∏õ‡∏¥‡∏î container ‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ #}
            <div class="text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</h2>
                <p class="text-lg text-gray-600 mb-10 max-w-2xl mx-auto">
                    ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏ô‡πÉ‡∏à‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞
                </p>

                <div class="max-w-xl mx-auto mb-12">
                    <form action="{% url 'event_list' %}" method="get" class="flex flex-col sm:flex-row gap-2 shadow-sm rounded-lg">
                        <input type="text" name="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°, ‡∏Ñ‡∏µ‡∏¢‡πå‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏î..." class="w-full px-5 py-3 border border-gray-300 sm:border-r-0 rounded-t-lg sm:rounded-tr-none sm:rounded-l-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base" value="{{ request.GET.search }}">
                        <button type="submit" class="w-full sm:w-auto bg-purple-600 hover:bg-purple-700 active:bg-purple-800 text-white px-8 py-3 rounded-b-lg sm:rounded-bl-none sm:rounded-r-lg font-semibold text-base transition-colors duration-150">
                            ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                        </button>
                    </form>
                </div>
            </div>

            <div class="mb-12">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h2>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 md:gap-6">
                    {% for community in communities %}
                    <a href="{% url 'event_list' %}?community={{ community.id }}" class="group block bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden">
                        <div class="relative h-40">
                            {% if community.image %}
                            <img src="{{ community.image.url }}" alt="{{ community.name }}" class="w-full h-full object-cover">
                            {% else %}
                            <div class="w-full h-full flex items-center justify-center bg-purple-100">
                                <svg class="w-12 h-12 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                            </div>
                            {% endif %}
                            <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-opacity duration-300 flex items-center justify-center p-2">
                                <h3 class="text-white font-semibold text-lg text-center">{{ community.name }}</h3>
                            </div>
                        </div>
                    </a>
                    {% empty %}
                     <p class="col-span-full text-gray-500 text-center py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡πÉ‡∏´‡πâ‡∏™‡∏≥‡∏£‡∏ß‡∏à</p>
                    {% endfor %}
                </div>
            </div>

            <div class="mb-12">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h2>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 md:gap-6">
                    {% for category in categories %}
                     <a href="{% url 'event_list' %}?category={{ category.id }}" class="group block bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden">
                        <div class="relative h-40">
                            {% if category.image %}
                            <img src="{{ category.image.url }}" alt="{{ category.name }}" class="w-full h-full object-cover">
                            {% else %}
                            <div class="w-full h-full flex items-center justify-center bg-indigo-100">
                                 <svg class="w-12 h-12 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg>
                            </div>
                            {% endif %}
                            <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-opacity duration-300 flex items-center justify-center p-2">
                                <h3 class="text-white font-semibold text-lg text-center">{{ category.name }}</h3>
                            </div>
                        </div>
                    </a>
                    {% empty %}
                     <p class="col-span-full text-gray-500 text-center py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>
                    {% endfor %}
                </div>
            </div>

            <div>
                <h2 class="text-2xl font-bold text-gray-800 mb-6">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    {% for event in featured_events %}
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden flex flex-col transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <a href="{% url 'event_detail' event.id %}" class="block h-48 overflow-hidden">
                            {% if event.image %}
                            <img src="{{ event.image.url }}" alt="{{ event.title }}" class="w-full h-full object-cover">
                            {% else %}
                            <div class="w-full h-full bg-gray-200 flex items-center justify-center">
                                <svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            </div>
                            {% endif %}
                        </a>
                        <div class="p-5 flex flex-col flex-grow">
                            <a href="{% url 'event_detail' event.id %}" class="hover:text-purple-700">
                                <h3 class="font-semibold text-lg mb-1 text-gray-800 group-hover:text-purple-700 truncate_2_lines">{{ event.title }}</h3>
                            </a>
                            <p class="text-xs text-purple-600 font-medium mb-2">{{ event.category.name }}</p>
                            <p class="text-sm text-gray-500 mb-1 flex items-center">
                                <svg class="w-4 h-4 mr-1.5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                {{ event.date|date:"d M Y" }} <span class="mx-1">|</span> {{ event.time|time:"H:i" }} ‡∏ô.
                            </p>
                            <p class="text-sm text-gray-600 mb-3 flex items-center truncate_2_lines">
                                <svg class="w-4 h-4 mr-1.5 text-gray-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                {{ event.location }}
                            </p>
                            <div class="mt-auto pt-3 border-t border-gray-100">
                                <a href="{% url 'event_detail' event.id %}" class="block w-full text-center bg-purple-600 hover:bg-purple-700 active:bg-purple-800 text-white py-2.5 px-4 rounded-md text-sm font-medium transition-colors duration-150">
                                    ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                                </a>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-span-1 sm:col-span-2 lg:col-span-3 xl:col-span-4 text-center py-10">
                        <p class="text-gray-500">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div> {# ‡∏õ‡∏¥‡∏î container ‡∏Ç‡∏≠‡∏á Communities, Categories, Featured Events #}
    </section> {# ‡∏õ‡∏¥‡∏î section ‡∏Ç‡∏≠‡∏á "‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏ô‡πÉ‡∏à" ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ #}

{% endblock %}